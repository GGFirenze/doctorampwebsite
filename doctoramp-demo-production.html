<!DOCTYPE html>
<html lang="en">
<!-- 
    DoctorAmp - Heatmaps Version
    =============================
    Enhanced with hash-based routing for Amplitude Heatmaps
    
    Each specialty now has its own unique URL:
    - #specialty/ophthalmologist
    - #specialty/gynecologist  
    - #specialty/psychologist
    - etc.
    
    This enables separate heatmap analysis per specialty page!
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DoctorAmp - Book a doctor appointment online</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü©∫</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: #fff;
            border-bottom: 1px solid #e8e8e8;
            padding: 0 20px;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #0596de;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #0596de;
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-secondary {
            background: #fff;
            color: #0596de;
            border: 2px solid #0596de;
        }

        .btn-secondary:hover {
            background: #f0f8ff;
        }

        .btn-primary {
            background: #0596de;
            color: #fff;
        }

        .btn-primary:hover {
            background: #0480c4;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(5, 150, 222, 0.3);
        }

        .btn-success {
            background: #28a745;
            color: #fff;
        }

        .btn-success:hover {
            background: #218838;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #0596de 0%, #0480c4 100%);
            color: white;
            padding: 80px 20px;
        }

        .hero-container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .hero p {
            font-size: 20px;
            margin-bottom: 40px;
            opacity: 0.95;
        }

        /* Search Box */
        .search-box {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            max-width: 900px;
            margin: 0 auto;
        }

        .search-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid #e8e8e8;
        }

        .search-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
            transition: all 0.3s;
        }

        .search-tab.active {
            color: #0596de;
            border-bottom-color: #0596de;
        }

        .search-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 15px;
        }

        .input-group {
            position: relative;
        }

        .input-group label {
            display: block;
            color: #666;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 8px;
            text-align: left;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 14px;
            border: 2px solid #e8e8e8;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #0596de;
            box-shadow: 0 0 0 3px rgba(5, 150, 222, 0.1);
        }

        .btn-search {
            background: #0596de;
            color: white;
            border: none;
            padding: 14px 40px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-size: 16px;
            align-self: flex-end;
            transition: all 0.3s;
        }

        .btn-search:hover {
            background: #0480c4;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(5, 150, 222, 0.4);
        }

        /* Specialties Section */
        .specialties {
            padding: 80px 20px;
            background: #f8f9fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 40px;
            text-align: center;
            color: #333;
        }

        .specialty-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .specialty-card {
            background: white;
            padding: 30px 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .specialty-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-color: #0596de;
        }

        .specialty-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .specialty-name {
            font-weight: 600;
            color: #333;
            font-size: 16px;
        }

        /* How It Works */
        .how-it-works {
            padding: 80px 20px;
            background: white;
        }

        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-top: 50px;
        }

        .step {
            text-align: center;
        }

        .step-number {
            width: 60px;
            height: 60px;
            background: #0596de;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            margin: 0 auto 20px;
        }

        .step h3 {
            font-size: 20px;
            margin-bottom: 10px;
            color: #333;
        }

        .step p {
            color: #666;
            line-height: 1.8;
        }

        /* Stats Section */
        .stats {
            background: linear-gradient(135deg, #0596de 0%, #0480c4 100%);
            padding: 60px 20px;
            color: white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .stat-item h3 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .stat-item p {
            font-size: 18px;
            opacity: 0.95;
        }

        /* Footer */
        .footer {
            background: #1a1a1a;
            color: white;
            padding: 60px 20px 20px;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto 40px;
        }

        .footer-section h4 {
            font-size: 16px;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 12px;
        }

        .footer-section a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: #0596de;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #333;
            color: #999;
            font-size: 14px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 16px;
            max-width: 450px;
            width: 90%;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #999;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: #f0f0f0;
            color: #333;
        }

        .modal h2 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #333;
        }

        .modal p {
            color: #666;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        .form-group input {
            width: 100%;
            padding: 14px;
            border: 2px solid #e8e8e8;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #0596de;
            box-shadow: 0 0 0 3px rgba(5, 150, 222, 0.1);
        }

        .form-submit {
            width: 100%;
            padding: 16px;
            background: #0596de;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .form-submit:hover {
            background: #0480c4;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(5, 150, 222, 0.3);
        }

        .modal-divider {
            text-align: center;
            margin: 25px 0;
            color: #999;
            position: relative;
        }

        .modal-divider::before,
        .modal-divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 45%;
            height: 1px;
            background: #e8e8e8;
        }

        .modal-divider::before {
            left: 0;
        }

        .modal-divider::after {
            right: 0;
        }

        .modal-switch {
            text-align: center;
            margin-top: 20px;
            color: #666;
        }

        .modal-switch a {
            color: #0596de;
            text-decoration: none;
            font-weight: 600;
        }

        .modal-switch a:hover {
            text-decoration: underline;
        }

        /* Doctor Listing Page */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .search-results-header {
            background: #f8f9fa;
            padding: 30px 20px;
            border-bottom: 1px solid #e8e8e8;
        }

        .search-results-header h1 {
            max-width: 1200px;
            margin: 0 auto;
            font-size: 28px;
            color: #333;
        }

        .doctors-layout {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 40px;
        }

        .filters-sidebar {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e8e8e8;
            height: fit-content;
            sticky: top: 90px;
        }

        .filter-group {
            margin-bottom: 30px;
        }

        .filter-group h3 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #333;
            font-weight: 700;
        }

        .filter-option {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            cursor: pointer;
        }

        .filter-option input {
            margin-right: 10px;
            cursor: pointer;
        }

        .filter-option label {
            cursor: pointer;
            color: #666;
            font-size: 14px;
        }

        .doctors-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .doctor-card {
            background: white;
            border: 1px solid #e8e8e8;
            border-radius: 12px;
            padding: 25px;
            display: grid;
            grid-template-columns: 120px 1fr auto;
            gap: 25px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .doctor-card:hover {
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            border-color: #0596de;
        }

        .doctor-photo {
            width: 120px;
            height: 120px;
            border-radius: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
        }

        .doctor-info h3 {
            font-size: 20px;
            color: #333;
            margin-bottom: 5px;
        }

        .doctor-specialty {
            color: #666;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .doctor-rating {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .stars {
            color: #ffa500;
            font-size: 16px;
        }

        .rating-count {
            color: #999;
            font-size: 14px;
        }

        .doctor-address {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .doctor-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .badge {
            background: #e8f4fd;
            color: #0596de;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .doctor-availability {
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-width: 150px;
        }

        .availability-label {
            font-size: 12px;
            color: #666;
            font-weight: 600;
        }

        .time-slot {
            padding: 10px 16px;
            background: #f0f8ff;
            border: 2px solid #0596de;
            color: #0596de;
            border-radius: 8px;
            text-align: center;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .time-slot:hover {
            background: #0596de;
            color: white;
        }

        /* Booking Modal */
        .booking-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .booking-step {
            flex: 1;
            text-align: center;
            padding: 10px;
            border-bottom: 3px solid #e8e8e8;
            color: #999;
            font-weight: 600;
            font-size: 14px;
        }

        .booking-step.active {
            border-bottom-color: #0596de;
            color: #0596de;
        }

        .booking-step.completed {
            border-bottom-color: #28a745;
            color: #28a745;
        }

        .booking-content {
            margin-bottom: 30px;
        }

        .doctor-booking-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .doctor-booking-summary h3 {
            font-size: 18px;
            margin-bottom: 5px;
        }

        .time-slots-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .time-slot-option {
            padding: 12px;
            border: 2px solid #e8e8e8;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            background: white;
        }

        .time-slot-option:hover {
            border-color: #0596de;
            background: #f0f8ff;
        }

        .time-slot-option.selected {
            border-color: #0596de;
            background: #0596de;
            color: white;
        }

        .booking-buttons {
            display: flex;
            gap: 15px;
        }

        .btn-back {
            flex: 1;
            padding: 16px;
            background: white;
            color: #0596de;
            border: 2px solid #0596de;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-back:hover {
            background: #f0f8ff;
        }

        .btn-next {
            flex: 2;
            padding: 16px;
            background: #0596de;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-next:hover {
            background: #0480c4;
        }

        .btn-next:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .success-icon {
            font-size: 80px;
            text-align: center;
            margin-bottom: 20px;
        }

        .success-message {
            text-align: center;
        }

        .success-message h2 {
            color: #28a745;
            margin-bottom: 15px;
        }

        .appointment-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .appointment-details p {
            margin-bottom: 10px;
            color: #333;
        }

        .appointment-details strong {
            color: #0596de;
        }

        /* User Profile Dropdown */
        .user-profile {
            position: relative;
        }

        .profile-button {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: #f0f8ff;
            border: 2px solid #0596de;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: #0596de;
            transition: all 0.3s;
        }

        .profile-button:hover {
            background: #e0f0ff;
        }

        .profile-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #0596de;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        .profile-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 10px;
            background: white;
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            min-width: 220px;
            z-index: 1001;
        }

        .profile-dropdown.active {
            display: block;
        }

        .profile-dropdown ul {
            list-style: none;
            padding: 8px 0;
        }

        .profile-dropdown li {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.3s;
            color: #333;
        }

        .profile-dropdown li:hover {
            background: #f8f9fa;
        }

        .profile-dropdown li.logout {
            color: #dc3545;
            border-top: 1px solid #e8e8e8;
        }

        /* Cookie Consent Modal - Doctolib Style */
        .cookie-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .cookie-overlay.active {
            display: flex;
        }

        .cookie-modal {
            background: white;
            border-radius: 16px;
            max-width: 600px;
            width: 90%;
            padding: 50px 40px 40px;
            text-align: center;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .cookie-title {
            font-size: 22px;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .cookie-subtitle {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 30px;
        }

        .privacy-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 30px;
            background: linear-gradient(135deg, #e8f4fd 0%, #f0f8ff 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
        }

        .cookie-text {
            color: #333;
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .cookie-text a {
            color: #0596de;
            text-decoration: none;
            font-weight: 600;
        }

        .cookie-text a:hover {
            text-decoration: underline;
        }

        .cookie-modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }

        .btn-learn-more {
            padding: 14px 28px;
            background: white;
            color: #0596de;
            border: 2px solid #0596de;
            border-radius: 8px;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-learn-more:hover {
            background: #f0f8ff;
        }

        .btn-refuse {
            padding: 14px 28px;
            background: #6c757d;
            color: white;
            border: 2px solid #6c757d;
            border-radius: 8px;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-refuse:hover {
            background: #5a6268;
            border-color: #5a6268;
        }

        .btn-accept {
            padding: 14px 28px;
            background: #0596de;
            color: white;
            border: 2px solid #0596de;
            border-radius: 8px;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-accept:hover {
            background: #0480c4;
            border-color: #0480c4;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(5, 150, 222, 0.3);
        }

        #mainContent.blur-content {
            filter: blur(3px);
            pointer-events: none;
        }

        .cookie-overlay {
            backdrop-filter: blur(0px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .search-inputs {
                grid-template-columns: 1fr;
            }

            .doctors-layout {
                grid-template-columns: 1fr;
            }

            .filters-sidebar {
                display: none;
            }

            .doctor-card {
                grid-template-columns: 1fr;
            }

            .hero h1 {
                font-size: 32px;
            }

            .nav-links {
                display: none;
            }

            .time-slots-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .cookie-modal {
                padding: 40px 30px 30px;
            }

            .cookie-title {
                font-size: 20px;
            }

            .cookie-subtitle {
                font-size: 16px;
            }

            .cookie-modal-buttons {
                flex-direction: column;
                gap: 12px;
            }

            .btn-learn-more,
            .btn-refuse,
            .btn-accept {
                width: 100%;
            }

            .privacy-icon {
                width: 100px;
                height: 100px;
                font-size: 50px;
            }
        }
    </style>
</head>
<body>
    <!-- Cookie Consent Modal - Doctolib Style -->
    <div class="cookie-overlay" id="cookieOverlay">
        <div class="cookie-modal">
            <h2 class="cookie-title">Nous respectons la vie priv√©e de nos utilisateurs.</h2>
            <h3 class="cookie-subtitle">Vos donn√©es, vos choix.</h3>
            
            <div class="privacy-icon">
                üîí
            </div>
            
            <div class="cookie-text">
                <p>DoctorAmp et ses partenaires utilisent des cookies pour assurer le bon fonctionnement du site, mesurer l'audience et les contenus consult√©s ou personnaliser les contenus affich√©s.</p>
            </div>
            
            <div class="cookie-text">
                <p>Pour en savoir plus sur les cookies, les donn√©es utilis√©es et leur traitement, vous pouvez consulter notre <a href="#" onclick="event.preventDefault(); trackFooterClick('Cookie Policy')">Politique en mati√®re de cookies</a> et notre <a href="#" onclick="event.preventDefault(); trackFooterClick('Privacy Policy')">Politique de protection des donn√©es √† caract√®re personnel</a>.</p>
            </div>
            
            <div class="cookie-modal-buttons">
                <button class="btn-learn-more" onclick="learnMoreCookies()">EN SAVOIR PLUS</button>
                <button class="btn-refuse" onclick="refuseCookies()">REFUSER</button>
                <button class="btn-accept" onclick="acceptCookies()">ACCEPTER</button>
            </div>
        </div>
    </div>

    <!-- Main Content Wrapper -->
    <div id="mainContent">
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="logo" onclick="window.location.hash = ''; goToHome();">
                ü©∫ DoctorAmp
            </div>
            <nav class="nav-links">
                <a href="#" onclick="trackNavClick('Find a Doctor')">Find a Doctor</a>
                <a href="#" onclick="trackNavClick('For Healthcare Professionals')">For Healthcare Professionals</a>
                <a href="#" onclick="trackNavClick('About Us')">About Us</a>
                <a href="#" onclick="trackNavClick('Help')">Help</a>
            </nav>
            <div class="auth-buttons" id="authButtons">
                <button class="btn btn-secondary" onclick="openLoginModal()">Log In</button>
                <button class="btn btn-primary" onclick="openLoginModal()">Sign Up</button>
            </div>
            <div class="user-profile" id="userProfile" style="display: none;">
                <div class="profile-button" onclick="toggleProfileDropdown()">
                    <div class="profile-avatar" id="profileAvatar"></div>
                    <span id="profileName"></span>
                </div>
                <div class="profile-dropdown" id="profileDropdown">
                    <ul>
                        <li onclick="trackProfileAction('My account')">üë§ My account</li>
                        <li class="logout" onclick="logout()">üö™ Log out</li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <!-- Home Page -->
    <div class="page active" id="homePage">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-container">
                <h1>Find and book a healthcare professional</h1>
                <p>Search for doctors, dentists, specialists and book an appointment online</p>
                
                <!-- Search Box -->
                <div class="search-box">
                    <div class="search-tabs">
                        <button class="search-tab active" data-tab="doctor" onclick="switchSearchTab('doctor')">Doctor</button>
                        <button class="search-tab" data-tab="dentist" onclick="switchSearchTab('dentist')">Dentist</button>
                        <button class="search-tab" data-tab="specialist" onclick="switchSearchTab('specialist')">Specialist</button>
                    </div>
                    <form class="search-inputs" onsubmit="performSearch(event)">
                        <div class="input-group">
                            <label>Specialty, doctor name, or condition</label>
                            <input type="text" id="searchSpecialty" placeholder="e.g., General Practitioner, Dr. Smith">
                        </div>
                        <div class="input-group">
                            <label>Location</label>
                            <input type="text" id="searchLocation" placeholder="City or postcode">
                        </div>
                        <button type="submit" class="btn-search">Search</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Specialties Section -->
        <section class="specialties">
            <div class="container">
                <h2 class="section-title">Browse by specialty</h2>
                <div class="specialty-grid">
                    <div class="specialty-card" onclick="navigateToSpecialty('General Practitioner')">
                        <div class="specialty-icon">üë®‚Äç‚öïÔ∏è</div>
                        <div class="specialty-name">General Practitioner</div>
                    </div>
                    <div class="specialty-card" onclick="navigateToSpecialty('Dentist')">
                        <div class="specialty-icon">ü¶∑</div>
                        <div class="specialty-name">Dentist</div>
                    </div>
                    <div class="specialty-card" onclick="navigateToSpecialty('Dermatologist')">
                        <div class="specialty-icon">üíÜ</div>
                        <div class="specialty-name">Dermatologist</div>
                    </div>
                    <div class="specialty-card" onclick="navigateToSpecialty('Cardiologist')">
                        <div class="specialty-icon">‚ù§Ô∏è</div>
                        <div class="specialty-name">Cardiologist</div>
                    </div>
                    <div class="specialty-card" onclick="navigateToSpecialty('Pediatrician')">
                        <div class="specialty-icon">üë∂</div>
                        <div class="specialty-name">Pediatrician</div>
                    </div>
                    <div class="specialty-card" onclick="navigateToSpecialty('Psychologist')">
                        <div class="specialty-icon">üß†</div>
                        <div class="specialty-name">Psychologist</div>
                    </div>
                    <div class="specialty-card" onclick="navigateToSpecialty('Ophthalmologist')">
                        <div class="specialty-icon">üëÅÔ∏è</div>
                        <div class="specialty-name">Ophthalmologist</div>
                    </div>
                    <div class="specialty-card" onclick="navigateToSpecialty('Gynecologist')">
                        <div class="specialty-icon">üë©‚Äç‚öïÔ∏è</div>
                        <div class="specialty-name">Gynecologist</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- How It Works -->
        <section class="how-it-works">
            <div class="container">
                <h2 class="section-title">How it works</h2>
                <div class="steps-grid">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h3>Search</h3>
                        <p>Find the right healthcare professional for your needs using our advanced search filters</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <h3>Book</h3>
                        <p>Choose an available appointment slot that fits your schedule - available 24/7</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <h3>Consult</h3>
                        <p>Meet your healthcare professional and get the care you need</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="stats">
            <div class="stats-grid">
                <div class="stat-item">
                    <h3>45,000+</h3>
                    <p>Healthcare professionals</p>
                </div>
                <div class="stat-item">
                    <h3>2M+</h3>
                    <p>Appointments per month</p>
                </div>
                <div class="stat-item">
                    <h3>4.8/5</h3>
                    <p>Patient satisfaction</p>
                </div>
                <div class="stat-item">
                    <h3>100%</h3>
                    <p>Free to use</p>
                </div>
            </div>
        </section>
    </div>

    <!-- Doctor Listing Page -->
    <div class="page" id="doctorsPage">
        <div class="search-results-header">
            <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; gap: 20px;">
                <a href="#" onclick="window.location.hash = ''; return false;" style="color: #0596de; text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 5px;">
                    ‚Üê Back to home
                </a>
                <h1 id="searchResultsTitle" style="flex: 1; margin: 0;">General Practitioners in London</h1>
            </div>
        </div>
        <div class="doctors-layout">
            <!-- Filters Sidebar -->
            <aside class="filters-sidebar">
                <div class="filter-group">
                    <h3>Availability</h3>
                    <div class="filter-option">
                        <input type="checkbox" id="filterToday" onchange="trackFilterChange('Today')">
                        <label for="filterToday">Available today</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="filterTomorrow" onchange="trackFilterChange('Tomorrow')">
                        <label for="filterTomorrow">Available tomorrow</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="filterWeek" onchange="trackFilterChange('This week')">
                        <label for="filterWeek">Available this week</label>
                    </div>
                </div>
                <div class="filter-group">
                    <h3>Consultation Type</h3>
                    <div class="filter-option">
                        <input type="checkbox" id="filterInPerson" onchange="trackFilterChange('In-person')">
                        <label for="filterInPerson">In-person consultation</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="filterVideo" onchange="trackFilterChange('Video')">
                        <label for="filterVideo">Video consultation</label>
                    </div>
                </div>
                <div class="filter-group">
                    <h3>Rating</h3>
                    <div class="filter-option">
                        <input type="checkbox" id="filter5stars" onchange="trackFilterChange('5 stars')">
                        <label for="filter5stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5 stars</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="filter4plus" onchange="trackFilterChange('4+ stars')">
                        <label for="filter4plus">‚≠ê‚≠ê‚≠ê‚≠ê 4+ stars</label>
                    </div>
                </div>
                <div class="filter-group">
                    <h3>Languages</h3>
                    <div class="filter-option">
                        <input type="checkbox" id="filterEnglish" onchange="trackFilterChange('English')">
                        <label for="filterEnglish">English</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="filterFrench" onchange="trackFilterChange('French')">
                        <label for="filterFrench">French</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="filterSpanish" onchange="trackFilterChange('Spanish')">
                        <label for="filterSpanish">Spanish</label>
                    </div>
                </div>
            </aside>

            <!-- Doctors List -->
            <div class="doctors-list" id="doctorsList">
                <!-- Doctor cards will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Login/Signup Modal - Multi-step Doctolib Style -->
    <div class="modal" id="authModal">
        <div class="modal-content" style="max-width: 500px;">
            <button class="modal-close" onclick="closeAuthModal()">√ó</button>
            
            <!-- Step 1: Choose Login or Signup -->
            <div id="authStep1" class="auth-step">
                <h2 style="text-align: center; margin-bottom: 40px;">Log in</h2>
                
                <!-- New to DoctorAmp Section -->
                <div style="background: #f8f9fa; padding: 30px; border-radius: 12px; margin-bottom: 20px;">
                    <div style="text-align: center; font-size: 32px; color: #0596de; margin-bottom: 15px;">D</div>
                    <h3 style="text-align: center; font-size: 18px; margin-bottom: 20px; color: #333;">New to DoctorAmp?</h3>
                    <div style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                        <span style="color: #0596de;">‚úâÔ∏è</span>
                        <span style="color: #666; font-size: 14px;">Send messages to your practitioners</span>
                    </div>
                    <div style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                        <span style="color: #0596de;">üìÖ</span>
                        <span style="color: #666; font-size: 14px;">Easily book appointments</span>
                    </div>
                    <div style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <span style="color: #0596de;">‚ù§Ô∏è</span>
                        <span style="color: #666; font-size: 14px;">Track your health progress</span>
                    </div>
                    <button class="form-submit" onclick="startSignup()">SIGN UP</button>
                </div>
                
                <!-- Already Have Account Section -->
                <div style="background: white; border: 2px solid #e8e8e8; padding: 30px; border-radius: 12px;">
                    <h3 style="text-align: center; font-size: 18px; margin-bottom: 20px; color: #333;">Already have an account?</h3>
                    <button class="btn" style="width: 100%; padding: 14px; background: white; color: #0596de; border: 2px solid #0596de; border-radius: 8px; font-weight: 700; cursor: pointer;" onclick="startLogin()">LOG IN</button>
                </div>
            </div>
            
            <!-- Step 2: Enter Email -->
            <div id="authStep2" class="auth-step" style="display: none;">
                <a href="#" onclick="goToAuthStep1()" style="color: #0596de; text-decoration: none; display: flex; align-items: center; gap: 5px; margin-bottom: 30px;">
                    ‚Üê Previous step
                </a>
                <h2 style="font-size: 24px; margin-bottom: 30px;">Enter your email or phone number</h2>
                <form onsubmit="submitEmail(event)">
                    <div class="form-group">
                        <label>Email or phone number</label>
                        <input type="text" id="authEmail" placeholder="For example: name@mail.com or 06 12 34 56 78" required>
                    </div>
                    <button type="submit" class="form-submit">CONTINUE</button>
                </form>
            </div>
            
            <!-- Step 3: Enter Password (Login) -->
            <div id="authStep3Login" class="auth-step" style="display: none;">
                <a href="#" onclick="goToAuthStep2()" style="color: #0596de; text-decoration: none; display: flex; align-items: center; gap: 5px; margin-bottom: 30px;">
                    ‚Üê Previous step
                </a>
                <h2 style="font-size: 24px; margin-bottom: 5px;">Welcome back</h2>
                <p id="loginEmailDisplay" style="color: #666; margin-bottom: 30px;"></p>
                <form onsubmit="submitLoginPassword(event)">
                    <div class="form-group">
                        <label>Password</label>
                        <div style="position: relative;">
                            <input type="password" id="loginPassword" required>
                            <button type="button" onclick="togglePasswordVisibility()" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 20px;">
                                üëÅÔ∏è
                            </button>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="rememberMe" checked>
                            <span style="font-size: 14px; color: #666;">Remember me</span>
                        </label>
                        <a href="#" onclick="event.preventDefault(); trackForgotPassword()" style="color: #0596de; text-decoration: none; font-size: 14px;">Forgot password?</a>
                    </div>
                    <button type="submit" class="form-submit">CONTINUE</button>
                </form>
            </div>
            
            <!-- Step 3: Enter Details (Signup) -->
            <div id="authStep3Signup" class="auth-step" style="display: none;">
                <a href="#" onclick="goToAuthStep2()" style="color: #0596de; text-decoration: none; display: flex; align-items: center; gap: 5px; margin-bottom: 30px;">
                    ‚Üê Previous step
                </a>
                <h2 style="font-size: 24px; margin-bottom: 30px;">Create your account</h2>
                <form onsubmit="submitSignup(event)">
                    <div class="form-group">
                        <label>First name</label>
                        <input type="text" id="signupFirstName" required>
                    </div>
                    <div class="form-group">
                        <label>Last name</label>
                        <input type="text" id="signupLastName" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="signupPassword" required minlength="8">
                    </div>
                    <button type="submit" class="form-submit">CREATE ACCOUNT</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div class="modal" id="bookingModal">
        <div class="modal-content" style="max-width: 600px;">
            <button class="modal-close" onclick="closeBookingModal()">√ó</button>
            
            <!-- Booking Steps -->
            <div class="booking-steps">
                <div class="booking-step active" id="step1">1. Select Time</div>
                <div class="booking-step" id="step2">2. Your Details</div>
                <div class="booking-step" id="step3">3. Confirmation</div>
            </div>

            <!-- Step 1: Select Time -->
            <div class="booking-content" id="bookingStep1">
                <div class="doctor-booking-summary" id="bookingSummary">
                    <!-- Doctor info will be inserted here -->
                </div>
                <h3 style="margin-bottom: 15px;">Select a time slot</h3>
                <div class="time-slots-grid" id="timeSlotsGrid">
                    <!-- Time slots will be inserted here -->
                </div>
                <div class="booking-buttons">
                    <button class="btn-back" onclick="closeBookingModal()">Cancel</button>
                    <button class="btn-next" id="nextToStep2" onclick="goToBookingStep2()" disabled>Next</button>
                </div>
            </div>

            <!-- Step 2: Your Details -->
            <div class="booking-content" id="bookingStep2" style="display: none;">
                <h3 style="margin-bottom: 20px;">Your information</h3>
                <form id="bookingDetailsForm">
                    <div class="form-group">
                        <label>First name *</label>
                        <input type="text" id="bookingFirstName" required>
                    </div>
                    <div class="form-group">
                        <label>Last name *</label>
                        <input type="text" id="bookingLastName" required>
                    </div>
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" id="bookingEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Phone number *</label>
                        <input type="tel" id="bookingPhone" required>
                    </div>
                    <div class="form-group">
                        <label>Reason for visit (optional)</label>
                        <input type="text" id="bookingReason" placeholder="e.g., Annual checkup, flu symptoms">
                    </div>
                </form>
                <div class="booking-buttons">
                    <button class="btn-back" onclick="goToBookingStep1()">Back</button>
                    <button class="btn-next" onclick="goToBookingStep3()">Continue to Confirmation</button>
                </div>
            </div>

            <!-- Step 3: Confirmation -->
            <div class="booking-content" id="bookingStep3" style="display: none;">
                <div class="success-icon">‚úÖ</div>
                <div class="success-message">
                    <h2>Appointment Confirmed!</h2>
                    <p>Your appointment has been successfully booked.</p>
                </div>
                <div class="appointment-details" id="appointmentSummary">
                    <!-- Appointment details will be inserted here -->
                </div>
                <button class="btn-next" style="width: 100%;" onclick="closeBookingModal()">Done</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-grid">
            <div class="footer-section">
                <h4>DoctorAmp</h4>
                <ul>
                    <li><a href="#" onclick="trackFooterClick('About Us')">About Us</a></li>
                    <li><a href="#" onclick="trackFooterClick('How It Works')">How It Works</a></li>
                    <li><a href="#" onclick="trackFooterClick('Careers')">Careers</a></li>
                    <li><a href="#" onclick="trackFooterClick('Press')">Press</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>For Patients</h4>
                <ul>
                    <li><a href="#" onclick="trackFooterClick('Find a Doctor')">Find a Doctor</a></li>
                    <li><a href="#" onclick="trackFooterClick('Book Appointment')">Book Appointment</a></li>
                    <li><a href="#" onclick="trackFooterClick('Video Consultation')">Video Consultation</a></li>
                    <li><a href="#" onclick="trackFooterClick('Help Center')">Help Center</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>For Healthcare Professionals</h4>
                <ul>
                    <li><a href="#" onclick="trackFooterClick('Join DoctorAmp')">Join DoctorAmp</a></li>
                    <li><a href="#" onclick="trackFooterClick('Practitioner Portal')">Practitioner Portal</a></li>
                    <li><a href="#" onclick="trackFooterClick('Resources')">Resources</a></li>
                    <li><a href="#" onclick="trackFooterClick('Support')">Support</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Legal</h4>
                <ul>
                    <li><a href="#" onclick="trackFooterClick('Privacy Policy')">Privacy Policy</a></li>
                    <li><a href="#" onclick="trackFooterClick('Terms of Service')">Terms of Service</a></li>
                    <li><a href="#" onclick="trackFooterClick('Cookie Policy')">Cookie Policy</a></li>
                    <li><a href="#" onclick="trackFooterClick('Data Protection')">Data Protection</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2025 DoctorAmp. Built with ‚ù§Ô∏è for better healthcare access. Powered by Amplitude Analytics.</p>
        </div>
    </footer>
    </div>
    <!-- End Main Content Wrapper -->

    <!-- Amplitude Browser SDK 2.0 with Session Replay - Manual Loading for GDPR Compliance -->
    <script src="https://cdn.amplitude.com/libs/analytics-browser-2.11.2-min.js.gz"></script>
    <script src="https://cdn.amplitude.com/libs/plugin-session-replay-browser-1.20.1-min.js.gz"></script>
    
    <script>
        // ============================================
        // AMPLITUDE ANALYTICS CONFIGURATION
        // ============================================
        
        // Amplitude API key
        const AMPLITUDE_API_KEY = '571a7178222cd32b254c9281d64896e6';
        
        let amplitudeInitialized = false;
        let currentUser = null;
        let currentSearchTab = 'doctor';
        let selectedDoctor = null;
        let selectedTimeSlot = null;
        let bookingData = {};
        let authFlow = 'login'; // 'login' or 'signup'
        let tempEmail = '';
        let currentSpecialty = null; // Track current specialty for filtering

        // Sample doctors data - expanded for multiple specialties
        const doctors = [
            // General Practitioners
            {
                id: 1,
                name: 'Dr. Sarah Johnson',
                specialty: 'General Practitioner',
                rating: 4.9,
                reviews: 234,
                address: '123 Harley Street, London W1G 6AX',
                photo: 'üë©‚Äç‚öïÔ∏è',
                badges: ['New patients', 'Video consultation', 'Same-day appointments'],
                timeSlots: ['09:00', '10:30', '14:00', '16:30']
            },
            {
                id: 2,
                name: 'Dr. Michael Chen',
                specialty: 'General Practitioner',
                rating: 4.8,
                reviews: 189,
                address: '45 Baker Street, London NW1 6XE',
                photo: 'üë®‚Äç‚öïÔ∏è',
                badges: ['Experienced', 'Video consultation'],
                timeSlots: ['09:30', '11:00', '15:00', '17:00']
            },
            // Ophthalmologists
            {
                id: 6,
                name: 'Dr. Emma Vision',
                specialty: 'Ophthalmologist',
                rating: 4.9,
                reviews: 198,
                address: '89 Moorfields Eye Hospital, London EC1V 2PD',
                photo: 'üëÅÔ∏è',
                badges: ['Eye specialist', 'Laser surgery', 'New patients'],
                timeSlots: ['09:00', '11:00', '14:30', '16:00']
            },
            {
                id: 7,
                name: 'Dr. David Sight',
                specialty: 'Ophthalmologist',
                rating: 4.8,
                reviews: 145,
                address: '34 Western Eye Hospital, London NW1 5QH',
                photo: 'üë®‚Äç‚öïÔ∏è',
                badges: ['Cataract specialist', 'Video consultation'],
                timeSlots: ['08:30', '10:30', '13:00', '15:30']
            },
            // Gynecologists
            {
                id: 8,
                name: 'Dr. Sophie Williams',
                specialty: 'Gynecologist',
                rating: 5.0,
                reviews: 278,
                address: '12 Portland Place, London W1B 1QU',
                photo: 'üë©‚Äç‚öïÔ∏è',
                badges: ['Women\'s health', 'New patients', 'Video consultation'],
                timeSlots: ['09:00', '11:30', '14:00', '16:30']
            },
            {
                id: 9,
                name: 'Dr. Rachel Green',
                specialty: 'Gynecologist',
                rating: 4.9,
                reviews: 221,
                address: '67 Harley Street, London W1G 8QD',
                photo: 'üë©‚Äç‚öïÔ∏è',
                badges: ['Prenatal care', 'Same-day appointments'],
                timeSlots: ['08:00', '10:00', '13:30', '17:00']
            },
            // Psychologists
            {
                id: 10,
                name: 'Dr. James Mind',
                specialty: 'Psychologist',
                rating: 4.8,
                reviews: 167,
                address: '45 Wimpole Street, London W1G 8SE',
                photo: 'üß†',
                badges: ['CBT specialist', 'Video consultation', 'Evening appointments'],
                timeSlots: ['10:00', '12:00', '15:00', '18:00']
            },
            {
                id: 11,
                name: 'Dr. Anna Wellness',
                specialty: 'Psychologist',
                rating: 4.9,
                reviews: 203,
                address: '23 Cavendish Square, London W1G 0PN',
                photo: 'üë©‚Äç‚öïÔ∏è',
                badges: ['Anxiety & depression', 'New patients', 'Weekend appointments'],
                timeSlots: ['09:30', '11:30', '14:30', '16:30']
            },
            // Cardiologists
            {
                id: 12,
                name: 'Dr. Robert Heart',
                specialty: 'Cardiologist',
                rating: 4.9,
                reviews: 189,
                address: '78 Harefield Hospital, Middlesex UB9 6JH',
                photo: '‚ù§Ô∏è',
                badges: ['Heart specialist', 'ECG testing', 'New patients'],
                timeSlots: ['09:00', '11:00', '14:00', '16:00']
            },
            {
                id: 13,
                name: 'Dr. Maria Cardio',
                specialty: 'Cardiologist',
                rating: 4.8,
                reviews: 176,
                address: '56 St Bartholomew\'s Hospital, London EC1A 7BE',
                photo: 'üë©‚Äç‚öïÔ∏è',
                badges: ['Hypertension specialist', 'Video consultation'],
                timeSlots: ['08:30', '10:30', '13:30', '15:30']
            },
            // Dermatologists
            {
                id: 14,
                name: 'Dr. Lisa Skin',
                specialty: 'Dermatologist',
                rating: 5.0,
                reviews: 245,
                address: '90 Cadogan Clinic, London SW3 2RP',
                photo: 'üíÜ',
                badges: ['Skin specialist', 'Acne treatment', 'New patients'],
                timeSlots: ['09:00', '11:00', '14:00', '16:30']
            },
            {
                id: 15,
                name: 'Dr. Tom Dermis',
                specialty: 'Dermatologist',
                rating: 4.8,
                reviews: 198,
                address: '45 Guy\'s Hospital, London SE1 9RT',
                photo: 'üë®‚Äç‚öïÔ∏è',
                badges: ['Eczema specialist', 'Video consultation', 'Same-day appointments'],
                timeSlots: ['08:30', '10:30', '13:00', '17:00']
            },
            // Pediatricians
            {
                id: 16,
                name: 'Dr. Emma Child',
                specialty: 'Pediatrician',
                rating: 4.9,
                reviews: 312,
                address: '34 Great Ormond Street Hospital, London WC1N 3JH',
                photo: 'üë∂',
                badges: ['Child specialist', 'Vaccination', 'New patients'],
                timeSlots: ['09:00', '11:00', '14:00', '16:00']
            },
            {
                id: 17,
                name: 'Dr. Peter Kids',
                specialty: 'Pediatrician',
                rating: 4.8,
                reviews: 267,
                address: '78 Chelsea and Westminster Hospital, London SW10 9NH',
                photo: 'üë®‚Äç‚öïÔ∏è',
                badges: ['Newborn care', 'Video consultation', 'Weekend appointments'],
                timeSlots: ['08:00', '10:00', '13:30', '15:30']
            },
            // Dentists
            {
                id: 18,
                name: 'Dr. Alex Tooth',
                specialty: 'Dentist',
                rating: 4.9,
                reviews: 223,
                address: '12 Dental Centre, London W1F 9JE',
                photo: 'ü¶∑',
                badges: ['Dental specialist', 'Emergency appointments', 'New patients'],
                timeSlots: ['09:00', '11:30', '14:00', '16:30']
            },
            {
                id: 19,
                name: 'Dr. Nina Smile',
                specialty: 'Dentist',
                rating: 4.8,
                reviews: 187,
                address: '56 Harley Street Dental, London W1G 9PJ',
                photo: 'üë©‚Äç‚öïÔ∏è',
                badges: ['Cosmetic dentistry', 'Video consultation'],
                timeSlots: ['08:30', '10:00', '13:00', '17:00']
            }
        ];

        // Initialize Amplitude when cookies are accepted
        function initializeAmplitude() {
            if (amplitudeInitialized) return;

            console.log('üöÄ Initializing Amplitude after consent...');

            // Add Session Replay plugin with 100% sample rate (must be added BEFORE init)
            window.amplitude.add(window.sessionReplay.plugin({sampleRate: 1}));
            
            // Initialize Amplitude Browser SDK 2.0 with selective Autocapture
            window.amplitude.init(AMPLITUDE_API_KEY, {
                fetchRemoteConfig: true,
                autocapture: {
                    attribution: true,        // ‚úÖ Track UTM parameters, referrers, campaign data
                    pageViews: true,          // ‚úÖ Track page views automatically
                    sessions: true,           // ‚úÖ Track session start/end
                    elementInteractions: false, // ‚ùå Turn off Element Clicked events
                    formInteractions: false,    // ‚ùå Turn off form tracking
                    fileDownloads: false        // ‚ùå Turn off file download tracking
                }
            });

            amplitudeInitialized = true;
            console.log('‚úÖ Amplitude Analytics initialized');
            console.log('üìä Autocapture enabled: Page Views, Attribution, Sessions');
            console.log('üé• Session Replay enabled at 100% sample rate');
        }

        // Cookie Consent Functions
        function acceptCookies() {
            localStorage.setItem('cookie_consent', 'accepted');
            document.getElementById('cookieOverlay').classList.remove('active');
            document.getElementById('mainContent').classList.remove('blur-content');
            
            // Initialize Amplitude
            initializeAmplitude();
        }

        function refuseCookies() {
            localStorage.setItem('cookie_consent', 'rejected');
            document.getElementById('cookieOverlay').classList.remove('active');
            document.getElementById('mainContent').classList.remove('blur-content');

            console.log('‚ùå Cookies rejected - Amplitude Analytics will NOT be initialized');
            console.log('‚úÖ User can browse the site without tracking');
        }

        function learnMoreCookies() {
            // Track learn more click
            if (amplitudeInitialized) {
                window.amplitude.track('Cookie Learn More Clicked');
            }
            // In production, this would link to your actual cookie policy page
            alert('Cette fonctionnalit√© ouvrirait votre politique de confidentialit√© compl√®te.');
        }

        // Check cookie consent on page load
        function checkCookieConsent() {
            const consent = localStorage.getItem('cookie_consent');
            if (consent === 'accepted') {
                console.log('‚úÖ Previous consent found - initializing Amplitude');
                initializeAmplitude();
            } else if (consent === 'rejected') {
                console.log('‚ùå User previously rejected cookies - Amplitude will not initialize');
            } else {
                console.log('üç™ No consent found - showing cookie modal');
                document.getElementById('cookieOverlay').classList.add('active');
                document.getElementById('mainContent').classList.add('blur-content');
            }
        }

        // ============================================
        // HASH-BASED ROUTING FOR HEATMAPS
        // ============================================
        // Each specialty gets its own unique URL via hash routing:
        // - #specialty/ophthalmologist
        // - #specialty/gynecologist
        // - #specialty/psychologist
        // etc.
        //
        // Benefits for Amplitude Heatmaps:
        // ‚úÖ Separate heatmaps for each specialty page
        // ‚úÖ Compare click patterns across specialties
        // ‚úÖ See which doctors get most clicks per specialty
        // ‚úÖ Identify UX issues specific to each page
        // ‚úÖ Browser back/forward buttons work
        // ‚úÖ Can bookmark specific specialties
        // ============================================
        
        // Navigate to specialty page with URL hash
        function navigateToSpecialty(specialty) {
            const specialtySlug = specialty.toLowerCase().replace(/\s+/g, '-');
            window.location.hash = `specialty/${specialtySlug}`;
            
            if (amplitudeInitialized) {
                window.amplitude.track('Specialty Selected', {
                    specialty: specialty,
                    selection_method: 'card_click'
                });
            }
        }
        
        // Handle URL hash changes
        function handleRouteChange() {
            const hash = window.location.hash;
            
            if (!hash || hash === '#' || hash === '#home') {
                goToHome();
            } else if (hash.startsWith('#specialty/')) {
                const specialtySlug = hash.replace('#specialty/', '');
                const specialty = specialtySlug.split('-').map(word => 
                    word.charAt(0).toUpperCase() + word.slice(1)
                ).join(' ');
                goToSpecialtyPage(specialty);
            }
        }
        
        // Listen for hash changes (browser back/forward buttons)
        window.addEventListener('hashchange', handleRouteChange);
        
        // Page Navigation
        function goToHome() {
            currentSpecialty = null;
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('homePage').classList.add('active');
            
            // Update page title
            document.title = 'DoctorAmp - Book a doctor appointment online';
            
            if (amplitudeInitialized) {
                window.amplitude.track('Page Viewed', {
                    page_name: 'Home',
                    page_path: window.location.pathname + window.location.hash
                });
            }
        }

        function goToSpecialtyPage(specialty) {
            currentSpecialty = specialty;
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('doctorsPage').classList.add('active');
            
            // Update page title (browser tab)
            document.title = `${specialty} in London - DoctorAmp`;
            
            // Update heading
            document.getElementById('searchResultsTitle').textContent = `${specialty} in London`;
            
            // Render filtered doctors
            renderDoctors(specialty);
            
            if (amplitudeInitialized) {
                window.amplitude.track('Page Viewed', {
                    page_name: `${specialty} Listings`,
                    page_path: window.location.pathname + window.location.hash,
                    page_title: document.title,
                    specialty: specialty
                });
            }
        }

        function goToDoctorsPage() {
            currentSpecialty = null;
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('doctorsPage').classList.add('active');
            renderDoctors();
            
            if (amplitudeInitialized) {
                window.amplitude.track('Page Viewed', {
                    page_name: 'Doctor Listings',
                    page_path: window.location.pathname + window.location.hash
                });
            }
        }

        // Search Functionality
        function switchSearchTab(tab) {
            currentSearchTab = tab;
            document.querySelectorAll('.search-tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
            
            if (amplitudeInitialized) {
                window.amplitude.track('Search Tab Changed', {
                    tab: tab
                });
            }
        }

        function performSearch(event) {
            event.preventDefault();
            const specialty = document.getElementById('searchSpecialty').value;
            const location = document.getElementById('searchLocation').value;
            
            if (amplitudeInitialized) {
                window.amplitude.track('Search Performed', {
                    search_type: currentSearchTab,
                    specialty: specialty,
                    location: location,
                    has_specialty: specialty.length > 0,
                    has_location: location.length > 0
                });
            }

            // Update search results title
            document.getElementById('searchResultsTitle').textContent = 
                `${specialty || 'Healthcare professionals'} in ${location || 'your area'}`;
            
            goToDoctorsPage();
        }

        function selectSpecialty(specialty) {
            document.getElementById('searchSpecialty').value = specialty;
            
            if (amplitudeInitialized) {
                window.amplitude.track('Specialty Selected', {
                    specialty: specialty,
                    selection_method: 'search'
                });
            }

            document.getElementById('searchResultsTitle').textContent = 
                `${specialty} doctors near you`;
            currentSpecialty = specialty;
            goToDoctorsPage();
        }

        // Render Doctors List (with optional specialty filter)
        function renderDoctors(filterSpecialty = null) {
            const list = document.getElementById('doctorsList');
            
            // Filter doctors by specialty if provided
            let filteredDoctors = filterSpecialty 
                ? doctors.filter(d => d.specialty === filterSpecialty)
                : doctors;
            
            // If no doctors found for specialty, show all
            if (filteredDoctors.length === 0) {
                filteredDoctors = doctors;
            }
            
            list.innerHTML = filteredDoctors.map(doctor => `
                <div class="doctor-card" onclick="trackDoctorCardClick(${doctor.id})">
                    <div class="doctor-photo">${doctor.photo}</div>
                    <div class="doctor-info">
                        <h3>${doctor.name}</h3>
                        <div class="doctor-specialty">${doctor.specialty}</div>
                        <div class="doctor-rating">
                            <span class="stars">${'‚≠ê'.repeat(Math.floor(doctor.rating))}</span>
                            <span class="rating-count">${doctor.rating} (${doctor.reviews} reviews)</span>
                        </div>
                        <div class="doctor-address">üìç ${doctor.address}</div>
                        <div class="doctor-badges">
                            ${doctor.badges.map(badge => `<span class="badge">${badge}</span>`).join('')}
                        </div>
                    </div>
                    <div class="doctor-availability">
                        <div class="availability-label">Next available</div>
                        ${doctor.timeSlots.slice(0, 2).map(slot => 
                            `<div class="time-slot" onclick="event.stopPropagation(); openBookingModal(${doctor.id}, '${slot}')">${slot}</div>`
                        ).join('')}
                    </div>
                </div>
            `).join('');
        }

        function trackDoctorCardClick(doctorId) {
            const doctor = doctors.find(d => d.id === doctorId);
            if (amplitudeInitialized && doctor) {
                window.amplitude.track('Doctor Card Clicked', {
                    doctor_id: doctor.id,
                    doctor_name: doctor.name,
                    specialty: doctor.specialty,
                    rating: doctor.rating
                });
            }
        }

        // Filter Tracking
        function trackFilterChange(filterName) {
            if (amplitudeInitialized) {
                window.amplitude.track('Filter Changed', {
                    filter_name: filterName
                });
            }
        }

        // Navigation Tracking
        function trackNavClick(item) {
            if (amplitudeInitialized) {
                window.amplitude.track('Navigation Clicked', {
                    nav_item: item
                });
            }
        }

        function trackFooterClick(item) {
            if (amplitudeInitialized) {
                window.amplitude.track('Footer Link Clicked', {
                    link_name: item
                });
            }
        }

        // ============================================
        // AUTHENTICATION FUNCTIONS - MULTI-STEP FLOW
        // ============================================
        
        // Helper function to hash email for User ID (simple hash)
        async function hashEmail(email) {
            const encoder = new TextEncoder();
            const data = encoder.encode(email.toLowerCase());
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex.substring(0, 16); // Return first 16 characters
        }
        
        // Open the auth modal (Step 1)
        function openLoginModal() {
            document.getElementById('authModal').classList.add('active');
            goToAuthStep1();
            
            if (amplitudeInitialized) {
                window.amplitude.track('Login Page Viewed');
            }
        }
        
        // Close auth modal
        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
            // Reset all steps
            goToAuthStep1();
            tempEmail = '';
        }
        
        // Navigate to Step 1 (Choice between Login/Signup)
        function goToAuthStep1() {
            document.querySelectorAll('.auth-step').forEach(step => step.style.display = 'none');
            document.getElementById('authStep1').style.display = 'block';
        }
        
        // Navigate to Step 2 (Email entry)
        function goToAuthStep2() {
            document.querySelectorAll('.auth-step').forEach(step => step.style.display = 'none');
            document.getElementById('authStep2').style.display = 'block';
        }
        
        // Start Login Flow
        function startLogin() {
            authFlow = 'login';
            goToAuthStep2();
            
            if (amplitudeInitialized) {
                window.amplitude.track('Login Started', {
                    flow: 'login'
                });
            }
        }
        
        // Start Signup Flow
        function startSignup() {
            authFlow = 'signup';
            goToAuthStep2();
            
            if (amplitudeInitialized) {
                window.amplitude.track('Signup Started', {
                    flow: 'signup'
                });
            }
        }
        
        // Submit Email (Step 2)
        function submitEmail(event) {
            event.preventDefault();
            tempEmail = document.getElementById('authEmail').value;
            
            if (amplitudeInitialized) {
                window.amplitude.track('Email Entered', {
                    flow: authFlow,
                    email_length: tempEmail.length
                });
            }
            
            // Hide step 2, show step 3
            document.querySelectorAll('.auth-step').forEach(step => step.style.display = 'none');
            
            if (authFlow === 'login') {
                document.getElementById('loginEmailDisplay').textContent = tempEmail;
                document.getElementById('authStep3Login').style.display = 'block';
            } else {
                document.getElementById('authStep3Signup').style.display = 'block';
            }
        }
        
        // Toggle password visibility
        function togglePasswordVisibility() {
            const passwordField = document.getElementById('loginPassword');
            passwordField.type = passwordField.type === 'password' ? 'text' : 'password';
        }
        
        // Track forgot password click
        function trackForgotPassword() {
            if (amplitudeInitialized) {
                window.amplitude.track('Forgot Password Clicked');
            }
            alert('Password reset functionality would be implemented here.');
        }
        
        // Submit Login Password (Step 3 - Login)
        async function submitLoginPassword(event) {
            event.preventDefault();
            
            // Hash the email for User ID
            const userId = await hashEmail(tempEmail);
            
            // Extract first and last name from email (simple approach)
            const emailName = tempEmail.split('@')[0];
            const names = emailName.split('.');
            const firstName = names[0] ? names[0].charAt(0).toUpperCase() + names[0].slice(1) : emailName;
            const lastName = names[1] ? names[1].charAt(0).toUpperCase() + names[1].slice(1) : '';
            const fullName = lastName ? `${firstName} ${lastName}` : firstName;
            
            // Set user
            currentUser = {
                email: tempEmail,
                firstName: firstName,
                lastName: lastName,
                fullName: fullName,
                initials: lastName ? (firstName[0] + lastName[0]).toUpperCase() : firstName.substring(0, 2).toUpperCase()
            };
            
            // Identify user in Amplitude with hashed User ID
            if (amplitudeInitialized) {
                window.amplitude.setUserId(userId);
                window.amplitude.identify(new window.amplitude.Identify()
                    .set('email', tempEmail)
                    .set('first_name', firstName)
                    .set('last_name', lastName)
                    .set('user_type', 'patient')
                );
                
                window.amplitude.track('Login Completed', {
                    login_method: 'email'
                });
            }
            
            // Update UI
            updateAuthenticatedUI();
            closeAuthModal();
        }
        
        // Submit Signup (Step 3 - Signup)
        async function submitSignup(event) {
            event.preventDefault();
            
            const firstName = document.getElementById('signupFirstName').value;
            const lastName = document.getElementById('signupLastName').value;
            
            // Hash the email for User ID
            const userId = await hashEmail(tempEmail);
            
            // Set user
            currentUser = {
                email: tempEmail,
                firstName: firstName,
                lastName: lastName,
                fullName: `${firstName} ${lastName}`,
                initials: (firstName[0] + lastName[0]).toUpperCase()
            };
            
            // Identify user in Amplitude with hashed User ID
            if (amplitudeInitialized) {
                window.amplitude.setUserId(userId);
                window.amplitude.identify(new window.amplitude.Identify()
                    .set('email', tempEmail)
                    .set('first_name', firstName)
                    .set('last_name', lastName)
                    .set('user_type', 'patient')
                );
                
                window.amplitude.track('Signup Completed', {
                    signup_method: 'email'
                });
            }
            
            // Update UI
            updateAuthenticatedUI();
            closeAuthModal();
        }
        
        // Update UI to show authenticated state
        function updateAuthenticatedUI() {
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userProfile').style.display = 'block';
            document.getElementById('profileAvatar').textContent = currentUser.initials;
            document.getElementById('profileName').textContent = currentUser.fullName;
            
            // Pre-fill booking form if open
            if (document.getElementById('bookingEmail')) {
                document.getElementById('bookingEmail').value = currentUser.email;
                document.getElementById('bookingFirstName').value = currentUser.firstName;
                document.getElementById('bookingLastName').value = currentUser.lastName;
            }
        }

        function toggleProfileDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            dropdown.classList.toggle('active');
            
            if (amplitudeInitialized && dropdown.classList.contains('active')) {
                window.amplitude.track('Profile Dropdown Opened');
            }
        }

        function trackProfileAction(action) {
            if (amplitudeInitialized) {
                window.amplitude.track('Profile Action Clicked', {
                    action: action
                });
            }
            document.getElementById('profileDropdown').classList.remove('active');
        }

        function logout() {
            if (amplitudeInitialized) {
                window.amplitude.track('Logout Completed');
                // Clear User ID but keep Device ID to track same user
                window.amplitude.setUserId(undefined);
            }

            currentUser = null;
            tempEmail = '';
            document.getElementById('authButtons').style.display = 'flex';
            document.getElementById('userProfile').style.display = 'none';
            document.getElementById('profileDropdown').classList.remove('active');
        }

        // Booking Modal Functions
        function openBookingModal(doctorId, timeSlot) {
            selectedDoctor = doctors.find(d => d.id === doctorId);
            selectedTimeSlot = timeSlot;

            // Update summary
            document.getElementById('bookingSummary').innerHTML = `
                <h3>${selectedDoctor.name}</h3>
                <p>${selectedDoctor.specialty}</p>
                <p>üìç ${selectedDoctor.address}</p>
            `;

            // Render all time slots
            const slotsGrid = document.getElementById('timeSlotsGrid');
            slotsGrid.innerHTML = selectedDoctor.timeSlots.map(slot => `
                <div class="time-slot-option ${slot === timeSlot ? 'selected' : ''}" 
                     onclick="selectTimeSlot('${slot}')">
                    ${slot}
                </div>
            `).join('');

            // Reset steps
            document.getElementById('step1').classList.add('active');
            document.getElementById('step2').classList.remove('active', 'completed');
            document.getElementById('step3').classList.remove('active', 'completed');
            document.getElementById('bookingStep1').style.display = 'block';
            document.getElementById('bookingStep2').style.display = 'none';
            document.getElementById('bookingStep3').style.display = 'none';

            // Pre-fill form if user is logged in
            if (currentUser) {
                if (document.getElementById('bookingEmail')) {
                    document.getElementById('bookingEmail').value = currentUser.email || '';
                    document.getElementById('bookingFirstName').value = currentUser.firstName || '';
                    document.getElementById('bookingLastName').value = currentUser.lastName || '';
                }
            }

            document.getElementById('bookingModal').classList.add('active');
            document.getElementById('nextToStep2').disabled = false;

            if (amplitudeInitialized) {
                window.amplitude.track('Booking Modal Opened', {
                    doctor_id: selectedDoctor.id,
                    doctor_name: selectedDoctor.name,
                    time_slot: timeSlot
                });
            }
        }

        function closeBookingModal() {
            document.getElementById('bookingModal').classList.remove('active');
            selectedDoctor = null;
            selectedTimeSlot = null;
            bookingData = {};
        }

        function selectTimeSlot(slot) {
            selectedTimeSlot = slot;
            document.querySelectorAll('.time-slot-option').forEach(s => s.classList.remove('selected'));
            event.target.classList.add('selected');
            document.getElementById('nextToStep2').disabled = false;

            if (amplitudeInitialized) {
                window.amplitude.track('Time Slot Selected', {
                    time_slot: slot,
                    doctor_id: selectedDoctor.id
                });
            }
        }

        function goToBookingStep2() {
            // Save step 1 data
            bookingData.timeSlot = selectedTimeSlot;

            // Update steps
            document.getElementById('step1').classList.add('completed');
            document.getElementById('step1').classList.remove('active');
            document.getElementById('step2').classList.add('active');
            
            // Show step 2
            document.getElementById('bookingStep1').style.display = 'none';
            document.getElementById('bookingStep2').style.display = 'block';

            if (amplitudeInitialized) {
                window.amplitude.track('Booking Step Completed', {
                    step: 1,
                    step_name: 'Time Selection'
                });
            }
        }

        function goToBookingStep1() {
            document.getElementById('step1').classList.add('active');
            document.getElementById('step1').classList.remove('completed');
            document.getElementById('step2').classList.remove('active');
            
            document.getElementById('bookingStep1').style.display = 'block';
            document.getElementById('bookingStep2').style.display = 'none';
        }

        function goToBookingStep3() {
            // Save step 2 data
            bookingData.firstName = document.getElementById('bookingFirstName').value;
            bookingData.lastName = document.getElementById('bookingLastName').value;
            bookingData.email = document.getElementById('bookingEmail').value;
            bookingData.phone = document.getElementById('bookingPhone').value;
            bookingData.reason = document.getElementById('bookingReason').value;

            // Update steps
            document.getElementById('step2').classList.add('completed');
            document.getElementById('step2').classList.remove('active');
            document.getElementById('step3').classList.add('active');

            // Render confirmation
            document.getElementById('appointmentSummary').innerHTML = `
                <p><strong>Doctor:</strong> ${selectedDoctor.name}</p>
                <p><strong>Specialty:</strong> ${selectedDoctor.specialty}</p>
                <p><strong>Date & Time:</strong> Today at ${selectedTimeSlot}</p>
                <p><strong>Location:</strong> ${selectedDoctor.address}</p>
                <p><strong>Patient:</strong> ${bookingData.firstName} ${bookingData.lastName}</p>
                <p><strong>Email:</strong> ${bookingData.email}</p>
                <p><strong>Phone:</strong> ${bookingData.phone}</p>
                ${bookingData.reason ? `<p><strong>Reason:</strong> ${bookingData.reason}</p>` : ''}
            `;

            // Show step 3
            document.getElementById('bookingStep2').style.display = 'none';
            document.getElementById('bookingStep3').style.display = 'block';

            if (amplitudeInitialized) {
                window.amplitude.track('Booking Step Completed', {
                    step: 2,
                    step_name: 'Patient Details'
                });

                window.amplitude.track('Appointment Booked', {
                    doctor_id: selectedDoctor.id,
                    doctor_name: selectedDoctor.name,
                    specialty: selectedDoctor.specialty,
                    time_slot: selectedTimeSlot,
                    has_reason: !!bookingData.reason,
                    user_logged_in: !!currentUser
                });
            }
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.user-profile')) {
                document.getElementById('profileDropdown').classList.remove('active');
            }
        });

        // Initialize on page load
        window.addEventListener('load', () => {
            console.log('üìÑ DoctorAmp page loaded');
            console.log('‚è≥ Amplitude SDK loaded but NOT initialized - waiting for cookie consent...');
            checkCookieConsent();
            
            // Initialize hash-based routing
            handleRouteChange();
        });

        /* ============================================
           HOW TO IMPLEMENT SCROLL DEPTH TRACKING
           ============================================
           
           If you want to track how far users scroll down the page:
           
           let scrollTracked = {25: false, 50: false, 75: false, 100: false};
           window.addEventListener('scroll', () => {
               if (!amplitudeInitialized) return;

               const scrollPercent = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
               
               Object.keys(scrollTracked).forEach(threshold => {
                   if (scrollPercent >= threshold && !scrollTracked[threshold]) {
                       scrollTracked[threshold] = true;
                       window.amplitude.track('Scroll Depth Reached', {
                           depth_percent: parseInt(threshold)
                       });
                   }
               });
           });
           
           This will track when users reach 25%, 50%, 75%, and 100% of page scroll.
           ============================================ */
    </script>
</body>
</html>
